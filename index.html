<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>í¸ì§€ ë„ì°©</title>

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  height: 100vh;
  background: #fffdf5;
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: system-ui, sans-serif;
}

/* ===== SCENE ===== */
.envelope-wrap {
  width: 320px;
  height: 260px;
  perspective: 1400px;
  position: relative;
  cursor: pointer;
  transform-style: preserve-3d;
  transition: transform 1s ease;
}

@media (max-width: 768px) {
  .envelope-wrap {
    transform: translateY(-56px);
  }
}

/* â­ 3D ì»¨í…Œì´ë„ˆ (ë¹ ì ¸ ìˆì—ˆìŒ) */
.envelope {
  position: relative;
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
}

.envelope-3d {
  position: relative;
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
  transition: transform 1s ease;
}

.envelope-3d.flipped {
  transform: rotateY(180deg);
}

.envelope-face {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  top: 0;
  left: 0;
}

/* ì• / ë’¤ ê³µí†µ */
.envelope-front,
.envelope-back {
  position: absolute;
  inset: 0;
  backface-visibility: hidden; /* â­ í•µì‹¬ */
}

/* ì•ë©´ */
.envelope-front {
  z-index: 2;
}

/* ë’·ë©´ */
.envelope-back {
  transform: rotateY(180deg); /* â­ ë°˜ëŒ€ ë°©í–¥ */
  background: #fffdf5;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

/* ë’·ë©´ ë´‰íˆ¬ ëª¸í†µ */
.back-body {
  background: #eae3ca;
  border: 1px solid #e5dfd2;
  border-radius: 18px;
}

/* ë’·ë©´ ë‚´ìš© ì¤‘ì•™ ì •ë ¬ */
.back-content {
  position: absolute;
  top: 90px;                 /* ì•ë©´ ë´‰íˆ¬ë‘ ë™ì¼ ê¸°ì¤€ */
  left: 50%;
  transform: translateX(-50%);
  width: 320px;
  height: 200px;

  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 12px;
  text-align: center;

  z-index: 2;
}

.back-content p {
  margin-top: 0px;
  margin-bottom: 6px;   /* ê¸°ë³¸ê°’ì€ ë³´í†µ 16px ì´ìƒ */
}

.back-content input {
  width: 90%;
  padding: 10px 14px;
  margin-bottom: 2px;

  border-radius: 999px;
  border: 1px solid #e0d8c2;
  background: #fff;

  font-size: 15px;
  text-align: center;
  letter-spacing: 0.2em;

  outline: none;
}

.back-content input:focus {
  border-color: #cdbf9a;
  box-shadow: 0 0 0 3px rgba(205,191,154,0.25);
}

.back-content button {
  width: 30%;
  padding: 5px 0;
  margin-top: 0;

  border-radius: 12px;
  border: 1px solid #d8ccb0;
  background: linear-gradient(
    to bottom,
    #fff6da,
    #f1e3be
  );

  color: #5b5648;
  font-size: 14px;
  letter-spacing: -0.02em;

  cursor: pointer;

  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.7),
    0 4px 10px rgba(0,0,0,0.08);

  transition: all 0.25s ease;
}

.back-content button:hover {
  transform: translateY(-1px);
}

.back-content button:active {
  transform: translateY(1px);
  box-shadow:
    inset 0 2px 6px rgba(0,0,0,0.15);
}

.envelope-body {
  position: absolute;
  top: 90px;
  left: 50%;
  transform: translateX(-50%);
  width: 320px;
  height: 200px;

  background: #eae3ca;
  border: 1px solid #e5dfd2;
  border-radius: 18px;

  box-shadow: 0 14px 32px rgba(0,0,0,0.08);
  transition: border-radius 0.4s ease;
  z-index: 1;
}

.envelope-wrap.open .envelope-body {
  border-top-left-radius: 0;
  border-top-right-radius: 0;
}

.envelope-flap {
  position: absolute;
  top: 90px;
  left: 50%;
  transform: translateX(-50%) rotateX(0deg);
  width: 320px;
  height: 110px;

  background: #fef8e3;
  border: 1px solid #e5dfd2;
  border-bottom: none;

  clip-path: polygon(
    0% 0%,
    100% 0%,
    60% 100%,
    40% 100%
  );

  border-radius: 18px;

  transform-origin: top center;
  transition: transform 1s ease, box-shadow 0.6s ease;
  box-shadow: 0 14px 32px rgba(0,0,0,0.08);

  z-index: 3;
}

.envelope-wrap.open .envelope-flap {
  transform: translateX(-50%) rotateX(180deg);
  border-top-left-radius: 0;
  border-top-right-radius: 0;
}

/* ===== INNER MASK (ì•ˆìª½ ì‚¬ë‹¤ë¦¬ê¼´, í´ë¦¬í•‘ ì „ìš©) ===== */
.inner-mask {
  position: absolute;
  top: 102px;
  left: 50%;
  transform: translateX(-50%);
  width: 280px;
  height: 70px;

  background: #fff;
  clip-path: polygon(
    0% 0%,
    100% 0%,
    60% 100%,
    40% 100%
  );

  border-top-left-radius: 18px;
  border-top-right-radius: 18px;

  overflow: hidden;
  z-index: 2;
}

/* ===== ê°€ì§œ ì¢…ì´ (ë§ˆìŠ¤í¬ ì•ˆì—ì„œë§Œ ë³´ì„) ===== */
.paper-clone {
  position: absolute;
  bottom: -40px;
  left: 50%;
  transform: translateX(-50%);
  width: 280px;
  height: 160px;
  background: #fff;
  border-radius: 8px;
}

/* ===== ì§„ì§œ ì¢…ì´ (ì• ë‹ˆë©”ì´ì…˜ìš©) ===== */
.paper-real {
  position: absolute;
  bottom: 70px;
  left: 50%;
  transform: translateX(-50%) scaleY(.3);
  width: 280px;
  height: 200px;

  background: #fff;
  border-radius: 8px;
  box-shadow: 0 10px 24px rgba(0,0,0,0.15);

  opacity: 0;
  z-index: 10;

  transition:
    transform 1.2s ease,
    opacity .6s ease;
}

/* ===== ì¢…ì´ ë“±ì¥ ===== */
.envelope-wrap.paper-out .paper-real {
  opacity: 1;
  transform: translateX(-50%) translateY(-180px) scale(1);
}

/* ===== ì¢…ì´ ì¤‘ì•™ ì •ë ¬ ===== */
.envelope-wrap.paper-center .paper-real {
  opacity: 1;
  transform: translateX(-50%) translateY(-40px) scaleY(1);
}


/* ===== ì¢…ì´ í™”ë©´ í™•ì¥ ===== */
.envelope-wrap.paper-expand .paper-real {
  transform:
    translate(-50%, -50%)
    scale(8);
  opacity: 1;
  transition: transform 1.8s ease-in;
}

/* ì¢…ì´ í™•ëŒ€ + ë¹¨ë ¤ë“¤ê¸° */
.envelope-wrap.paper-zoom .paper-real {
  animation: paperZoom 1.4s ease-in forwards;
}

body.zooming {
  transition: background 1.2s ease;
  background: #f6f2e8;
}

@keyframes paperZoom {
  0% {
    transform: translateX(-50%) translateY(0) scale(1);
    opacity: 1;
    filter: blur(0);
  }

  40% {
    transform: translateX(-50%) translateY(20px) scale(1.15);
    opacity: 1;
    filter: blur(1px);
  }

  100% {
    transform: translateX(-50%) translateY(40px) scale(3.2);
    opacity: 0;
    filter: blur(10px);
  }
}

@keyframes paperFade {
  0% { opacity: 1; }
  70% { opacity: 1; }
  100% { opacity: 0; }
}

@keyframes shake {
  0%, 100% { transform: translateX(-50%); }
  20% { transform: translateX(-46%); }
  40% { transform: translateX(-54%); }
}

#freesia {
  position: fixed;
  inset: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  pointer-events: none;
  transition: opacity 1.2s ease;
  z-index: 0;
}

/* í”„ë¦¬ì§€ì•„ ë“±ì¥ */
body.show-freesia #freesia {
  opacity: 1;
}


</style>
</head>

<body>

<div class="envelope-wrap" id="envelope">
  <div class="envelope-3d">

    <!-- ===== FRONT ===== -->
    <div class="envelope-front">

      <!-- ì•ˆìª½ ì‚¬ë‹¤ë¦¬ê¼´ (í´ë¦¬í•‘ìš©) -->
      <div class="inner-mask">
        <div class="paper-clone"></div>
      </div>

      <!-- ì§„ì§œ ì¢…ì´ -->
      <div class="paper-real"></div>

      <!-- ê²‰ ëšœê»‘ -->
      <div class="envelope-flap"></div>

      <!-- ëª¸í†µ -->
      <div class="envelope-body"></div>
    </div> 

    <div class="envelope-back">
      <!-- ë’·ë©´ ë´‰íˆ¬ ëª¸í†µ -->
      <div class="envelope-body back-body"></div>

      <!-- â­ ë’·ë©´ ì½˜í…ì¸  ì „ìš© ë ˆì´ì–´ -->
      <div class="back-content">
        <p>ğŸ”’<br>ì´ í¸ì§€ë¥¼ ì—´ë ¤ë©´<br>ë¹„ë°€ë²ˆí˜¸ê°€ í•„ìš”í•´ìš”</p>
        <input id="pw" type="password" />
        <button id="pwBtn">í¸ì§€ ì—´ê¸°</button>
      </div>
    </div>

    <!-- í”„ë¦¬ì§€ì•„ ì²« í™”ë©´ (ìˆ¨ê²¨ë‘ ) -->
    <iframe id="freesia" src="freesia.html" frameborder="0"></iframe>

  </div>
</div>

<script>
const wrap = document.getElementById('envelope');
const card = document.querySelector('.envelope-3d');
const pwInput = document.getElementById('pw');
const pwBtn = document.getElementById('pwBtn');

const PASSWORD = "260109";
let step = 0;

wrap.addEventListener('click', () => {
  if (step === 0) {
    card.classList.add('flipped');
    step = 1;
  }
});

pwBtn.addEventListener('click', (e) => {
  e.stopPropagation();

  if (pwInput.value !== PASSWORD) {
    alert("ë•¡!");
    return;
  }

  /* 1ï¸ ì•ë©´ìœ¼ë¡œ ëŒì•„ì˜¤ê¸° */
  card.classList.remove('flipped');
  step = 2;

  /* 2ï¸ ëšœê»‘ ì—´ê¸° */
  setTimeout(() => {
    wrap.classList.add('open');
  }, 700);

  /* 3ï¸ ì¢…ì´ íŠ€ì–´ë‚˜ì˜¤ê¸° */
  setTimeout(() => {
    wrap.classList.add('paper-out');
  }, 1400);

  /* 4ï¸ ì¢…ì´ ì¤‘ì•™ìœ¼ë¡œ ë‚´ë ¤ì˜¤ê¸° */
  setTimeout(() => {
    wrap.classList.add('paper-center');
  }, 2200);

  /* 5ï¸ ì¢…ì´ í™•ëŒ€ + ì‚¬ë¼ì§ */
  setTimeout(() => {
    wrap.classList.add('paper-expand');
  }, 3000);

  /* 6ï¸ í”„ë¦¬ì§€ì•„ í™”ë©´ìœ¼ë¡œ ì´ë™ */
  setTimeout(() => {
    window.location.href = "freesia.html";
  }, 4400);
});
</script>


</body>
</html>
